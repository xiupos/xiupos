---
import BaseHead from "@components/BaseHead.astro";
import Header from "@components/Header.astro";
import Footer from "@components/Footer.astro";
import FormattedDate from "@components/FormattedDate.astro";
import { BLOG_TITLE, SITE_AUTHOR, HEADER_LINKS } from "../site.config";
import type { CollectionEntry } from "astro:content";

const { title, pubDate, lang, draft, links } =
  Astro.props as CollectionEntry<"blog">["data"];
---

<html lang={lang}>
  <head>
    <BaseHead
      title={title + " - " + BLOG_TITLE}
      author={SITE_AUTHOR}
      description=""
      noindex={draft}
    />
    <style lang="scss">
      article {
        padding-bottom: 1rem;

        .title {
          font-size: 2em;
          margin: 0.25em 0 0;
        }
      }
    </style>
  </head>

  <body>
    <Header links={HEADER_LINKS} />
    <main>
      <article>
        <header>
          <h1 class="title">{title}</h1>
          <div class="monospace">
            {
              [
                <FormattedDate date={pubDate} />,
                draft && "draft",
                ...links.map((link) => <a href={link.href}>{link.text}</a>),
              ]
                .filter(Boolean)
                .flatMap((a) => [a, "; "])
                .toSpliced(-1, 1)
            }
          </div>
        </header>
        <slot />
      </article>
    </main>
    <Footer />
  </body>
</html>
